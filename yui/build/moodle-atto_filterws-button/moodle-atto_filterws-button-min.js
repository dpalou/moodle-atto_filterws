YUI.add("moodle-atto_filterws-button",function(e,t){e.namespace("M.atto_filterws").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){this.addButton({icon:"icon",iconComponent:"atto_filterws",title:"addfilterws",buttonName:"addfilterws",callback:this.addFilterTag})},addFilterTag:function(){var e=this.get("host"),t=e.getSelection();if(t&&t[0]){t=t[0];var n=this._getTextElement(t.endContainer,t.endOffset),r=this._getTextElement(t.startContainer,t.startOffset);if(r&&n){var i=n===t.endContainer?t.endOffset:0;n.data=n.data.substring(0,i)+"{fws}"+n.data.substring(i),i=r===t.startContainer?t.startOffset:0,r.data=r.data.substring(0,i)+"{fws web}"+r.data.substring(i)}else window.console.warn("Could not find the right elements to insert the fws tag.");this.markUpdated()}else window.console.warn("Could not find a selection to insert the fws tag.")},_getTextElement:function(e,t){if(e.nodeType==Node.TEXT_NODE)return e;if(e.childNodes){if(t>=e.childNodes.length){var n=document.createTextNode("");return e.appendChild(n),n}var r=e.childNodes[t];if(r.nodeType==Node.TEXT_NODE)return r;var n=document.createTextNode("");return e.insertBefore(n,r),n}}})},"@VERSION@",{requires:[]});
